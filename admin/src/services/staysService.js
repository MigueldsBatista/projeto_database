import api from './api';

/**
 * Serviço para gerenciar estadias
 * Fornece funções para realizar operações CRUD nas estadias
 * Generated by Copilot
 */
export const staysService = {
  /**
   * Busca todas as estadias cadastradas no sistema
   * @returns {Promise} Promise com a lista de estadias
   */
  getAll: async () => {
    const response = await api.get('/estadias');
    return response.data;
  },

  /**
   * Busca uma estadia específica pelo ID
   * @param {number} id - ID da estadia a ser buscada
   * @returns {Promise} Promise com os dados da estadia
   */
  getById: async (id) => {
    const response = await api.get(`/estadias/${id}`);
    return response.data;
  },

  /**
   * Cria uma nova estadia no sistema
   * @param {Object} stay - Dados da estadia a ser criada
   * @returns {Promise} Promise com os dados da estadia criada
   */
  create: async (stay) => {
    const response = await api.post('/estadias/create', stay);
    return response.data;
  },

  /**
   * Atualiza os dados de uma estadia existente
   * @param {Object} stay - Dados atualizados da estadia
   * @returns {Promise} Promise com os dados da estadia atualizada
   */
  update: async (stay) => {
    const response = await api.put('/estadias/update', stay);
    return response.data;
  },

  /**
   * Finaliza uma estadia (dá alta ao paciente)
   * @param {number} id - ID da estadia a ser finalizada
   * @param {string} dataAlta - Data de alta do paciente
   * @returns {Promise} Promise com o status da operação
   */
  finishStay: async (stay) => {
    console.log("Finishing stay", stay);
    
    const response = await api.put(`/estadias/update`, {
      ...stay,
      dataSaida: new Date().toISOString(),
      });
    return response.data;
  },

  /**
   * Busca estadias ativas (sem data de alta)
   * @returns {Promise} Promise com a lista de estadias ativas
   */
  getActiveStays: async () => {
    const response = await api.get('/pacientes/estadias-ativas');
    return response.data;
  },

  /**
   * Busca o tempo médio de estadia dos pacientes
   * @returns {Promise} Promise com o tempo médio de estadia
   */
  getAverageStayTime: async () => {
    const response = await api.get('/estadias/tempo-medio');
    return response.data;
  }
};