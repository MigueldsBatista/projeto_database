import api from './api';

/**
 * Serviço para gerenciar faturamento e finanças
 * Fornece funções para acessar e analisar dados financeiros
 * Generated by Copilot
 */
export const billingService = {
  /**
   * Busca todas as faturas cadastradas no sistema
   * @returns {Promise} Promise com a lista de faturas
   */
  getAllInvoices: async () => {
    const response = await api.get('/faturas');
    return response.data;
  },

  /**
   * Busca uma fatura específica pelo ID
   * @param {number} id - ID da fatura a ser buscada
   * @returns {Promise} Promise com os dados da fatura
   */
  getInvoiceById: async (id) => {
    const response = await api.get(`/faturas/${id}`);
    return response.data;
  },

  /**
   * Busca faturamento agrupado por período
   * @param {string} startDate - Data inicial do período (formato: YYYY-MM-DD)
   * @param {string} endDate - Data final do período (formato: YYYY-MM-DD)
   * @param {string} groupBy - Como agrupar os dados (dia, mes, ano)
   * @returns {Promise} Promise com os dados de faturamento agrupados
   */
  getBillingByPeriod: async (startDate, endDate, groupBy = 'mes') => {
    const response = await api.get('/faturas/faturamento', {
      params: { dataInicio: startDate, dataFim: endDate, agruparPor: groupBy }
    });
    return response.data;
  },

  /**
   * Busca o faturamento do mês atual
   * @returns {Promise} Promise com os dados de faturamento do mês atual
   */
  getCurrentMonthBilling: async () => {
    const response = await api.get('/faturas/faturamento/mes-atual');
    return response.data;
  },

  /**
   * Calcula o gasto médio por paciente
   * @returns {Promise} Promise com o valor médio gasto por paciente
   */
  getAverageSpendingPerPatient: async () => {
    const response = await api.get('/faturas/media-por-paciente');
    return response.data;
  },
  
  /**
   * Busca as faturas associadas a um paciente específico
   * @param {number} patientId - ID do paciente
   * @returns {Promise} Promise com a lista de faturas do paciente
   */
  getInvoicesByPatient: async (patientId) => {
    const response = await api.get(`/faturas/paciente/${patientId}`);
    return response.data;
  }
};